# yaml-language-server: $schema=https://www.openstatus.dev/schema.json
# OpenStatus monitoring configuration for Detent API
# Docs: https://docs.openstatus.dev/monitoring-as-code

api-health:
  name: "Detent API"
  description: "API health with database connectivity check"
  frequency: "5m"
  active: true
  regions:
    - iad # US East (Virginia)
    - lax # US West (Los Angeles)
    - ams # Europe (Amsterdam)
    - syd # Oceania (Sydney)
    - sin # Asia (Singapore)
    - gru # South America (Sao Paulo)
  retry: 3
  kind: http
  request:
    url: https://api.detent.sh/health
    method: GET
    headers:
      User-Agent: OpenStatus
  assertions:
    - kind: statusCode
      compare: eq
      target: 200
    - kind: textBody
      compare: contains
      target: '"status":"operational"'
